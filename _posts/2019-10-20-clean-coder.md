---
layout: post
title: "클린 코더"
date: 2019-10-20 15:31:24 +0900
update: 2019-10-20 18:20:23 +0900
categories: ['professional']
---

* TOC
{:toc}

# 미리 읽어두기

## (p.38) 프로 프로그래머의 핵심 세 가지

1. 태도 attitude
2. 원칙 discipline
3. 행동 action

# 1장 프로의 마음가짐

## 무엇보다도 해를 끼치지 마라

### (p.50) 오류에 대한 마음가짐

프로라면 같은 오류를 반복하면 안 된다. 경력을 쌓아가면서 오류를 만드는 비율을 급격히 떨어뜨려 0에 가깝게 만들어야 한다. 0이 되지는 않지만 가능한 한 0에 가깝게 만드는 게 당신 책임이다.

### (p.51) QA는 아무것도 찾지 못해야 한다

소프트웨어를 출시 할 때는 QA가 문제를 찾지 못할 것이라고 어느 정도 자신할 수 있어야 한다. 코드에 결함이 있는 걸 알면서도 QA에게 코드를 보내는 일은 매우 프로답지 못한 행동이다.

### (p.51) 결함이 있는 코드란 무엇일까

확신을 갖지 못하는 코드는 모두 결함이 있는 코드다. 잘 돌아가는지 아닌지도 모르는 코드를 QA에게 보내는 개발자는 프로가 아니다. '해를 끼치지 마라'는 규칙을 어기는 것이다.

### (p.51) QA가 오류를 찾는다면

사과할 준비를 해야 한다. 또한 오류가 어떻게 감시망을 뚫었는지 알아내 다시는 그런 일이 생기지 않도록 방비해야 한다.

QA가 문제를 찾을 때마다, 더 나쁜 경우 사용자가 문제를 찾을 때마다, 개발자는 놀라움과 분함을 느껴야 마땅하며, 다시는 그런 일이 생기지 않도록 마음을 다져야 한다. 

사용자가 문제를 찾는 것은 더 나쁜 경우다.

### (p.51) 코드가 잘 돌아가는지 알려면 어떻게 해야 할까

간단하다. 테스트하고 또 테스트하라.

그렇게까지 테스트를 하면 시간이 너무 많이 걸리지 않을까 걱정될지도 모른다. 좋은 지적이다! 그러니까 테스트를 자동화해야 한다. 순식간에 실행할 수 있는 테스트를 만들고 가능한 자주 돌려라.

### (p.52) 100% 테스트 커버리지를 권장하냐고?

권장이 아니라 강력히 요구한다. 작성한 코드는 한 줄도 빠짐없이 전부 테스트해야 한다.

비현실적이라고? 전혀 그렇지 않다. 작성한 코드는 당연히 실행된다. 실행된다면 제대로 돌아가는지 알아야 한다. 알 수 있는 방법은 테스트뿐이다.

### (p.52) 어떤 코드는 테스트하기 어렵지 않나?

그렇다. 하지만 그 이유는 코드를 테스트하기 어렵게 설계했기 때문이다. 해결책은 테스트하기 쉽게 코드를 설계하는 것이다. 가장 좋은 방법은 테스트 코드를 먼저 작성한 다음, 그 테스트를 통과하도록 코드를 작성하는 것이다.

이것이 테스트 주도 개발, 즉 TDD로 알려진 원칙이다.

> JMC 정리
> * 결함 있는 코드를 QA에게 전달하는 것은 프로답지 못한 행동이다.
> * 잘 돌아가는지 확신하지 못하는 코드는 모두 결함 있는 코드다.
> * 코드가 잘 돌아가는지 알려면 테스트해야 한다.
> * 테스트하기 어려운 코드가 있다. 그건 코드를 테스트하기 어렵게 설계했기 때문이다.
> * 따라서, 테스트 코드를 먼저 작성한 다음, 그 테스트를 통과하도록 코드를 작성하라.
> * 이것이 TDD를 하는 이유(중 하나)이다.

### (p.53) FitNesse에서 `____` 테스트와`____` 테스트를 실행하기만 하면 전체 QA 과정이 끝난다

단위 테스트와 인수 테스트.

### (p.54) 소프트웨어가 바꾸기 쉬운지 아닌지 증명하는 유일한 길은 무엇인가

실제로 조금 바꿔보는 것이다. 바꾸기가 생각만큼 쉽지 않다면, 설계를 갈고 닦아서 다음 번에는 더 쉽게 바꿀 수 있도록 만들어야 한다.

### (p.54) 코드를 조금 바꾸는 일은 언제 해야 할까: 보이스카웃 규칙.

항상 해야 한다. 모듈을 살펴볼 때마다 작고 가벼운 변화를 더해 구조를 개선해야 한다. 코드를 읽을 때마다 구조를 바꿔야 한다.

어떤 사람들은 이런 철학을 무자비한 리팩토링이라 부르지만, 나는 '보이 스카웃 규칙'이라 부른다. 보이 스카웃 규칙이란 모듈을 체크인할 때는 항상 체크아웃했을 때보다 깨끗해야 한다는 규칙이다. 코드를 볼 때마다 착한 일을 하라.

### (p.54) 동작 중인 소프트웨어를 계속 바꾸는 일은 위험할까: 아니다.

정말 위험한 일은 소프트웨어를 고정된 상태로 두는 일이다. 소프트웨어를 구부리지 않는다면, 정말 변화가 필요할 때, 소프트웨어가 단단히 굳어있을 것이다.

왜 개발자들은 코드 바꾸기를 무서워할까? 코드를 망가트릴까 봐 겁이 나서다! 왜 코드를 망칠까 봐 겁이 날까? 테스트가 없기 때문이다.

### (p.54) 코드를 바꾸는 일이 전혀 무섭지 않을 때는 언제일까.

자동화된 테스트 묶음(suite) 커버리지가 거의 100%이고, 내킬 때마다 재빨리 돌려볼 수 있다면, 코드를 바꾸는 일은 전혀 무섭지 않다.

프로 개발자는 코드와 테스트에 확신이 넘치기 때문에, 시도 때도 없이 이리 저리 코드를 바꿔도 마음이 평안하다. 

내키면 클래스 이름을 바꾼다. 코드를 읽다가 메소드가 좀 길다 싶으면 아무렇지도 않게 메소드를 나눈다. `switch` 문장을 다형성을 활용한 구조로 바꾸기도 하고, 상속 계층을 무너트려 연속된 명령어(chain-of-command)로 바꾸기도 한다. 한 마디로 조각가가 진흙을 다루는 것처럼 코드도 끊임없이 모양을 바꾼다.

## 직업 윤리

### (p.55) 업무 시간과 공부할 시간

개발자는 회사에 어느 정도의 시간과 노력을 빚지고 있다. 미국을 예로 들면 한 주에 40시간 업무가 표준이다. 이 40시간은 회사의 문제를 푸는 데 써야 한다. 자신의 문제를 푸는 데 쓰면 안 된다.

한 주에 60시간 일할 계획을 짜야 한다. 40시간은 회사를 위해 쓰고 나머지 20시간은 자신을 위해 쓴다. 20시간은 읽고 연습하고 공부하고 경력에 도움이 되는 여러 가지를 하며 보내야 한다.

한 주에 20시간이면 대략 하루에 3시간이다. 점심 시간에 책을 읽고, 출퇴근할 때 팟캐스트를 듣고, 새 언어를 배우는 데 90분을 쓰면 3시간이 된다.

### (p.55) 가족은 어떡하고 내 인생은 어쩌고 회사를 위해 희생해야 하나.

한 주는 168시간이다. 회사 일에 40시간, 자기 개발에 20시간을 쓰면 108시간이 남는다. 56시간 잠을 자면 52시간을 다른 일에 쓸 수 있다.

이렇게까지 시간을 쓰기 싫을지도 모른다. 그건 좋다. 하지만 자신을 프로라고 생각해선 안 된다. 프로는 직업을 돌보는 데 시간을 투자한다.

일은 직장에서만 해야지 집에서까지 일하면 안 된다고 생각할지 모른다. 동감이다! 그 20시간 동안은 회사를 위해 일해선 안 된다. 경력을 위해 힘써야 한다.

회사와 경력 양쪽에 도움되는 일도 있다. 어떤 때는 회사를 위해 하는 일이 경력에 큰 도움이 되기도 한다. 그렇다면 20시간을 투자하는 일도 합리적이다. 하짐나 그 20시간은 자신을 위한 시간임을 명심해야 한다. 그 시간은 프로로서 자신의 가치를 높이기 위해 써야 한다.

기력이 고갈되기 딱 좋은 방법이라는 생각이 들지도 모르지만 아니다. 오히려 기력 고갈을 피하는 방법이다. 소프트웨어 개발자가 된 이유는 소프트웨어에 열정을 느끼며, 그 열정이 프로가 되고 싶다는 바람을 북돋았기 때문일 것이다. 20시간 동안 그 열정을 강하게 만드는 일을 하라. 20시간을 즐겁게 보낼 것이다.

### (p.57) 프로 소프트웨어 개발자라면 알아야 하는 최소한의 기술 목록

지난 50년간 전산 분야에는 아이디어, 규율, 기법, 도구, 전문 용어가 넘쳐 흘렀다. 프로가 되고 싶다면 지식을 익혀 큼지막한 덩어리를 만든 다음 그 덩어리를 계속 키워야 한다.

지난 50년간 힘들게 얻은 지식 대부분은 아직도 쓸모가 많다. 다음은 프로 소프트웨어 개발자라면 알아야 하는 최소한의 기술 목록이다.

* 디자인 패턴: 24가지 GOF 패턴을 설명할 수 있고, POSA 패턴을 실무에 적용할 수준으로 알아야 한다.
* 설계 원칙: SOLID 객체지향 원칙을 알아야 하고 컴포넌트 개념을 충분히 이해해야 한다.
* 방법론: XP, 스크럼, 린, 칸반, 폭포수, 구조적 분석, 구조적 설계 개념을 충분히 이해해야 한다.
* 원칙: TDD, 객체지향 설계, 구조적 프로그래밍, 지속적 통합(CI), 짝 프로그래밍을 실천해야 한다.
* 도구: UML, 데이터 흐름도(DFD), 구조 차트(Structure Chart), 페트리 넷(Petri Net), 상태전이 다이어그램과 테이블(State Transition Diagram and Table), 흐름도(flow chart), 결정 테이블(decision table)을 어떻게 쓰는지 알아야 한다.

### (p.58) 끊임없이 배워라.

책, 기사, 블로그, 트윗을 읽어라. 컨퍼런스에 가라. 여러 모임에 참가하라. 스터디 그룹에 들어가라. 익숙한 영역을 벗어나 낯선 것을 익혀라. .NET 프로그래머라면 자바를 배워라. 자바 프로그래머라면 루비를 배워라. C 프로그래머라면 Lisp를 배워라. 두뇌를 유연하게 만들고 싶다면 프롤로그(Prolog)와 포스(Forth)를 배워라.

### (p.59) 프로는 연습한다. 일상적인 업무는 연습이 아니다.

일상 업무는 연습이라기보다 공연이다. 업무라는 공연을 떠나 기술을 개선하고 향상시키고자 하는 목적만으로 하는 훈련이 바로 연습이다.

소프트웨어 개발자를 위한 다양한 훈련 방식은 6장에서 다룬다. 내가 애용하는 기법 하나만 말하자면, 볼링 점수 계산이나 인수분해 프로그래밍 같은 간단한 훈련을 계속해서 반복한다. 이런 훈련을 품새(kata)라 한다.

품새는 대개 프로그래밍으로 간단한 문제를 푸는 형식이다. 예를 들면 정수를 소인수 분해하는 기능을 만드는 식이다. 하지만 문제 풀이는 품새의 핵심이 아니다. 문제를 어떻게 푸는지는 이미 알고 있다. 품새의 핵심은 손가락과 두뇌를 단련시키는 일이다.

나는 매일 품새를 한두 개씩 푼다. 보통 업무를 시작하기 전에 푸는 일이 많다. 자바나 루비 혹은 클로저(Clojure)로 풀기도 하고, 잊고 싶지 않은 언어로 풀기도 한다. 품새를 통해 특정 리팩토링을 활용하거나 단축키를 익숙하게 누르는 것 같은 세부 기술을 날카롭게 다듬는다.

품새를 아침에는 준비운동 10분으로, 저녁에는 마무리운동 10분으로 생각하자.

### (p.60) 배움에 도움되는 방법들이 궁금한가.

1. 연습:
	* 나는 프로그래밍으로 간단한 문제를 푸는 훈련을 매일 한두 개씩 푼다.
2. 함께 일하기:
	* 프로 소프트웨어 개발자는 함꼐 프로그래밍하고, 함께 연습하고, 함께 설계하고 계획하는 데 특히 노력을 기울인다. 그렇게 하면서 서로 많이 배울 뿐 아니라, 일도 빨리 끝나고 오류가 더 적다.
3. 멘토링:
	* 배우기에 가장 좋은 방법은 가르치는 것이다.
4. 업무 지식을 익혀라:
	* 자신이 프로그래밍 하는 제품의 업무 분야 지식(도메인)을 알아야 한다.
5. 회사와 고객에 동질감을 가져라:
	* 회사를 대할 때 "개발자 vs 개발자가 아닌 나머지"라는 태도에 빠지기 쉽다. 프로라면 무슨 짓을 해서라도 이런 일을 피해야 한다.
6. 겸손
	* 프로는 때때로 실패한다는 사실을 잘 안다. 
	* 다른 사람이 실수했다고 망신을 주지 않는다. 다음 번 실패할 사람이 자신임을 알기 떄문이다.
	* 목표가 무너졌을 때, 가장 좋은 방법은 하워드의 충고를 따르는 것이다. "그냥 웃어, 이 친구야."

### (p.60) 멘토링: 배우기에 가장 좋은 방법은 가르치는 것이다.

가르치고 배울 때 더 큰 이득을 보는 쪽은 선생님이다.

마찬가지로 새로운 사람을 조직에 익숙하게 만드는 가장 좋은 방법은 옆에 앉아서 몇 가지 작업 요령을 알려주는 일이다. 프로라면 후배들을 멘토링하는 책임을 져야 한다. 후배들이 방치된 채 이리저리 떠돌게 둬선 안 된다.

### (p.60) 업무지식을 익혀라.

전문가가 될 필요까진 없지만 적절한 수준에 도달하기 위해 어느 정도 노력을 기울여야 한다. 새로운 분야에서 프로젝트를 시작하게 되면, 관련 분야의 책을 한두 권 읽어보자. 업무 전문가들과 함께 시간을 보내고, 전문가들의 원칙과 가치를 이해해보자.

프로답지 못한 행동 중에서 최악은 제품 사양이 사업 진행에 이치가 맞는지 따져보지도 않고 그저 사양(spec)에 따라 코딩하는 일이다. 사양에 오류가 있는지 알아보고 이의를 제기할 수 있을 만큼 업무를 알아야 한다.

# 2장 아니라고 말하기

프로라면 권위에 맞서 진실을 말해야 한다. 프로는 관리자에게 아니라고 말하는 용기를 가져야 한다.

## 왜 그런지가 중요한가

경험상 왜 그런지보다는 사실이 어떤지가 훨씬 중요하다. 이번 일에서 사실이란 로그인 페이지 완성에는 2주가 필요하다는 현실이다. 왜 2주가 필요한지는 사소한 일이다.

왜 그런지 설명하면 마이크가 상황을 파악하고 현실을 받아들이는 데 도움이 될지도 모른다는 사실은 인정한다. 마이크가 기술 관련 경험을 했거나, 이해심이 넓은 성격이라면, 왜 그런지 설명하는 일은 도움이 된다. 

반면, 마이크가 결론에 불만을 가질지도 모른다. 테스트를 다 할 필요가 없다든지, 리뷰나 어떤 12단계는 생략하라고 주장할지도 모른다. **세부사항을 과하게 알려주는 일은 밀착 관리를 초래한다**.


