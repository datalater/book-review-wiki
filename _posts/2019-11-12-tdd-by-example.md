---
layout: post
title: "테스트 주도 개발"
date: 2019-11-12 12:32:38 +0900
update: 2019-11-12 12:51:40 +0900
categories: ['tdd']
---

* TOC
{:toc}

# (p.45) TDD는 문제를 변형시킨다.

> 우리 문제는 '다중 통화 구현'에서 '이 테스트를 통과시킨 후 나머지 테스트들도 통과시키기'로 변형된 것이다. 훨씬 간단한다. 범위도 훨씬 적어서 걱정이 줄었다. 이 테스트를 통과시키는 건 쉽다.
> 내가 제시할 해법이 마음에 안 들지도 모른다. 하지만 당장의 목표는 완벽한 해법을 구하는 것이 아니라 테스트를 통과하는 것일 뿐이다.

TDD를 하게 되면 큰 문제를 작은 문제로 변형하게 된다. 인지 부하도 적어지고 큰 문제를 작은 문제를 쪼개서 해결하는 능력이 자연스럽게 발달된다.

# (p.48) 중복된 로직을 하나로 끄집어내는 일엔 객체를 이용하는 것이 최고다.

> 중복(duplicaton)은 문제의 징후다. 중복의 가장 흔한 예는 로직의 중복이다. 중복된 로직이란 동일한 문장이 코드의 여러 장소에 나타나는 것을 의미한다. 중복된 로직을 하나로 끄집어내는 일엔 객체를 이용하는 것이 최고다.

중복 로직을 제거해야 할 때 객체를 이용하는 방법을 떠올려 보자.

# (p.48) TDD의 두 번째 규칙

> 프로그램에서는 중복만 제거해주면 의존성도 제거된다. 이게 바로 TDD의 두 번째 규칙이 존재하는 이유다. 다음 테스트로 진행하기 전에 중복을 제거함으로써, 오직 한 가지(one and only one)의 코드 수정을 통해 다음 테스트도 통과되게 만들 가능성을 최대화하는 것이다.

TDD의 첫 번째 규칙은, "실패하는 테스트를 먼저 작성하는 것"이다. 두 번째 규칙은 "중복을 제거하는 것"이다. 코드나 테스트 중 한쪽을 수정하면 반드시 다른 한쪽도 수정해야 한다면, 테스트와 코드 사이에 의존성이 존재하는 것이다. 이러한 의존성을 제거하려면 중복을 제거하면 된다.

# (p.49) TDD의 핵심은 작은 단계를 밟을 능력을 갖추어야 한다는 것이다.

> 기억하기 바란다. TDD의 핵심은 이런 작은 단계를 밟아야 한다는 것이 아니라, 이런 작은 단계를 밟을 능력을 갖추어야 한다는 것이다. 내가 일상에서 항상 이런 식으로 작업하는지 궁금한가? 그렇지 않다. 하지만 일이 좀 묘하게 꼬이기 시작하면 난 작은 단계를 밟을 능력이 내게 있다는 사실을 기뻐하게 된다. 여러분이 직접 예제를 선택하여 작은 단계로 구현하는 연습을 해보기 바란다. 만약 정말 작은 단계로 작업하는 방법을 배우면, 저절로 적절한 크기의 단계로 작업할 수 있게 될 것이다. 그러나 큰 단계로만 작업했다면, 더 작은 단계가 적절할 경우에 대해 결코 알지 못하게 된다.

복잡한 일을 해결하려면 작은 단계로 작업할 줄 알아야 한다. TDD는 작은 단계를 밟을 능력을 갖추는 데 도움이 된다.

# (p.51) 작업 초반 예시로 보는 구체적인 TDD 프로세스

> 지금까지 한 작업을 검토해보자. 우리는 다음 작업들을 해냈다.
>
> * 우리가 알고 있는 작업해야 할 테스트 목록을 만들었다.
> * 오퍼레이션이 외부에서 어떻게 보이길 원하는지 말해주는 이야기를 코드로 표현했다.
> * JUnit에 대한 상세한 사항들은 잠시 무시하기로 했다.
> * 스텁 구현을 통해 테스트를 컴파일했다.
> * 끔찍한 죄악을 범하여 테스트를 통과시켰다.
> * 돌아가는 코드에서 상수를 변수로 변경하여 점진적으로 일반화했다.
> * 새로운 할일들을 한번에 처리하는 대신 할일 목록에 추가하고 넘어갔다.

위 내용 중 새롭게 배운 중요 사항을 나의 방식대로 적어보면,

* 알고 있는 작업해야 할 테스트 목록을 먼저 만들자.
* 오퍼레이션이 외부에서 어떻게 보이길 원하는지 구체적으로 설명하는 이야기를 테스트 코드로 표현하라. (구현이 아니라 동작을 테스트해라!)
* 테스트 코드 작성 후 컴파일을 통과시키기 위해 스텁 구현을 해라.
* 테스트를 통과한 코드에서 상수를 변수로 변경하는 것처럼 점진적으로 일반화하라.
* TDD를 하던 중 새로운 할일이 생기면 할일 목록에 추가하고 넘어가라.




